let pageX, pageY, primary_tran, primary_curr, popAllow, show = !1, target = !1, selection = "", lang = ["Afrikaans", "Albanian", "Arabic", "Azerbaijani", "Basque", "Bengali", "Belarusian", "Bulgarian", "Catalan", "Chinese Simplified", "Chinese Traditional", "Croatian", "Czech", "Danish", "Dutch", "English", "Esperanto", "Estonian", "Filipino", "Finnish", "French", "Galician", "Georgian", "German", "Greek", "Gujarati", "Haitian Creole", "Hebrew", "Hindi", "Hungarian", "Icelandic", "Indonesian", "Irish", "Italian", "Japanese", "Kannada", "Korean", "Latin", "Latvian", "Lithuanian", "Macedonian", "Malay", "Maltese", "Norwegian", "Persian", "Polish", "Portuguese", "Romanian", "Russian", "Serbian", "Slovak", "Slovenian", "Spanish", "Swahili", "Swedish", "Tamil", "Telugu", "Thai", "Turkish", "Ukrainian", "Urdu", "Vietnamese", "Welsh", "Yiddish"], langCode = ["af", "sq", "ar", "az", "eu", "bn", "be", "bg", "ca", "zh-CN", "zh-TW", "hr", "cs", "da", "nl", "en", "eo", "et", "tl", "fi", "fr", "gl", "ka", "de", "el", "gu", "ht", "iw", "hi", "hu", "is", "id", "ga", "it", "ja", "kn", "ko", "la", "lv", "lt", "mk", "ms", "mt", "no", "fa", "pl", "pt", "ro", "ru", "sr", "sk", "sl", "es", "sw", "sv", "ta", "te", "th", "tr", "uk", "ur", "vi", "cy", "yi"]; chrome.storage.sync.get(["primaryTranslate"], e => { primary_tran = null == e.primaryTranslate ? "bn" : e.primaryTranslate }), chrome.storage.sync.get(["primaryCurrency"], e => { primary_curr = null == e.primaryCurrency ? "BDT" : e.primaryCurrency }), chrome.storage.sync.get(["pop_win"], e => { popAllow = null != e.pop_win && e.pop_win }); let div = document.createElement("div"); div.id = "____tooltip", div.innerHTML = `<a id="__search"><img title="Search" src='${chrome.runtime.getURL("data/search.png")}'></a>\n                 <a id="__copy" ><img title="Copy" src='${chrome.runtime.getURL("data/copy.png")}'></a>\n                 <a id="__translate" ><img title="Translate" src='${chrome.runtime.getURL("data/translate.png")}'></a>\n                `, document.body.appendChild(div); const CopyAlert = document.createElement("div"); CopyAlert.id = "__cpyAlrt", CopyAlert.innerHTML = "Copied !", document.body.appendChild(CopyAlert); const currencyPopUp = document.createElement("div"); currencyPopUp.id = "__cuncy_pop", document.body.appendChild(currencyPopUp); const transltPopUp = document.createElement("div"); function getSelectedTxt() { let e = ""; return window.getSelection ? e = window.getSelection() : document.getSelection ? e = document.getSelection() : document.selection && (e = document.selection.createRange().text), t = e.toString(), t.trim() } transltPopUp.id = "__trns_pop", document.body.appendChild(transltPopUp), window.addEventListener("mouseup", e => { selection = getSelectedTxt(), 0 != e.button || target || (pageX = e.x - 100, pageY = e.screenY < 150 ? e.pageY + 20 : e.pageY - 75), "" != selection ? (div.style.opacity = "0.9", div.style.display = "block", div.style.top = pageY + "px", div.style.left = pageX + "px", show = !0) : "" == selection && show && (document.getElementById("____tooltip").style.display = "none", currencyPopUp.style.display = "none", transltPopUp.style.display = "none", show = !1, target = !1) }), document.getElementById("__search").addEventListener("click", () => { div.style.display = "none", window.open("https://www.google.com/search?q=" + selection, "_blank") }), document.getElementById("__copy").addEventListener("click", () => { div.style.display = "none", document.execCommand("copy"), CopyAlert.style.right = "80px", setTimeout(function () { CopyAlert.style.right = "-150px" }, 2e3) }), document.getElementById("__translate").addEventListener("click", () => { if (popAllow) { let e = `https://translate.google.com/#auto/${primary_tran}/${selection}`, t = screen.width ? (screen.width - 800) / 2 : 100, n = screen.height ? (screen.height - 500) / 2 : 100; window.open(e, "Google Translate", `width=800,height=500,top=${n},left=${t},scrollbars=yes,location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=yes`) } else { fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${primary_tran}&dt=t&q=${selection}`).then(e => e.json()).then(e => { let t = langCode.indexOf(e[2]), n = langCode.indexOf(primary_tran); lang[t], transltPopUp.innerHTML = `<div><span style="font-weight:bold">${lang[t]} : </span> ${selection}</div>\n    <hr style="margin:8px;height:1px">\n    <div><span style="font-weight:bold">${lang[n]} : </span> ${e[0][0][0]}</div>\n    `, transltPopUp.style.top = pageY + 100 + "px", transltPopUp.style.left = pageX + "px", transltPopUp.style.display = "block" }).catch(e => console.log(e)) } }), document.getElementById("____tooltip").addEventListener("mouseover", function (e) { target = !0 }), document.getElementById("____tooltip").addEventListener("mouseleave", function (e) { target = !1 });